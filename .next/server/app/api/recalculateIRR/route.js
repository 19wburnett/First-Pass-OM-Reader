"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/recalculateIRR/route";
exports.ids = ["app/api/recalculateIRR/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FrecalculateIRR%2Froute&page=%2Fapi%2FrecalculateIRR%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FrecalculateIRR%2Froute.ts&appDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FrecalculateIRR%2Froute&page=%2Fapi%2FrecalculateIRR%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FrecalculateIRR%2Froute.ts&appDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_westo_OneDrive_Documents_First_Pass_OM_Reader_app_api_recalculateIRR_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/recalculateIRR/route.ts */ \"(rsc)/./app/api/recalculateIRR/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/recalculateIRR/route\",\n        pathname: \"/api/recalculateIRR\",\n        filename: \"route\",\n        bundlePath: \"app/api/recalculateIRR/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\westo\\\\OneDrive\\\\Documents\\\\First Pass OM Reader\\\\app\\\\api\\\\recalculateIRR\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_westo_OneDrive_Documents_First_Pass_OM_Reader_app_api_recalculateIRR_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/recalculateIRR/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZWNhbGN1bGF0ZUlSUiUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcmVjYWxjdWxhdGVJUlIlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyZWNhbGN1bGF0ZUlSUiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN3ZXN0byU1Q09uZURyaXZlJTVDRG9jdW1lbnRzJTVDRmlyc3QlMjBQYXNzJTIwT00lMjBSZWFkZXIlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q3dlc3RvJTVDT25lRHJpdmUlNUNEb2N1bWVudHMlNUNGaXJzdCUyMFBhc3MlMjBPTSUyMFJlYWRlciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMrQztBQUM1SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2NyZS11bmRlcndyaXRpbmctYXBwLz9jZWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXHdlc3RvXFxcXE9uZURyaXZlXFxcXERvY3VtZW50c1xcXFxGaXJzdCBQYXNzIE9NIFJlYWRlclxcXFxhcHBcXFxcYXBpXFxcXHJlY2FsY3VsYXRlSVJSXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZWNhbGN1bGF0ZUlSUi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3JlY2FsY3VsYXRlSVJSXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZWNhbGN1bGF0ZUlSUi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHdlc3RvXFxcXE9uZURyaXZlXFxcXERvY3VtZW50c1xcXFxGaXJzdCBQYXNzIE9NIFJlYWRlclxcXFxhcHBcXFxcYXBpXFxcXHJlY2FsY3VsYXRlSVJSXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3JlY2FsY3VsYXRlSVJSL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FrecalculateIRR%2Froute&page=%2Fapi%2FrecalculateIRR%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FrecalculateIRR%2Froute.ts&appDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/recalculateIRR/route.ts":
/*!*****************************************!*\
  !*** ./app/api/recalculateIRR/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\nasync function POST(request) {\n    try {\n        const { dealData, newAssumptions, newPrice } = await request.json();\n        // Recalculate IRR with new assumptions and/or new price\n        const recalculatedData = recalculateIRRWithNewAssumptions(dealData, newAssumptions, newPrice);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(recalculatedData);\n    } catch (error) {\n        console.error(\"Error recalculating IRR:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to recalculate IRR\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction recalculateIRRWithNewAssumptions(dealData, newAssumptions, newPrice) {\n    // Extract base data from original deal\n    const { propertyName, whisperPrice, units, occupancy, avgRent, expenses: parsedExpenses, NOI: parsedNOI, marketCapRate: originalMarketCapRate } = dealData;\n    // Use new assumptions\n    const assumptions = newAssumptions;\n    // Recalculate pro forma metrics with new assumptions\n    const grossPotentialIncome = units * avgRent * 12;\n    const vacancy = assumptions.vacancy;\n    const effectiveGrossIncome = grossPotentialIncome * (1 - vacancy);\n    // Use parsed expenses or calculate based on new assumption\n    const operatingExpenses = parsedExpenses || effectiveGrossIncome * assumptions.expenseRatio;\n    // Use parsed NOI or calculate\n    const NOI = parsedNOI || effectiveGrossIncome - operatingExpenses;\n    // Use new price if provided, otherwise calculate from cap rate\n    const purchasePrice = newPrice || NOI / assumptions.marketCapRate;\n    // Calculate price difference (whisper price - calculated price)\n    // If using whisper price, difference is 0. If using custom price, difference is custom - market\n    let priceDifference;\n    if (newPrice === whisperPrice) {\n        priceDifference = 0 // Using whisper price\n        ;\n    } else if (newPrice && newPrice !== NOI / assumptions.marketCapRate) {\n        const marketValue = NOI / assumptions.marketCapRate;\n        priceDifference = newPrice - marketValue // Custom price vs market\n        ;\n    } else {\n        priceDifference = whisperPrice && whisperPrice > 0 ? whisperPrice - purchasePrice : 0 // Original logic\n        ;\n    }\n    // Cap rate valuation (same as purchase price)\n    const capRateValuation = purchasePrice;\n    // Financing calculations with new assumptions\n    const loanAmount = purchasePrice * assumptions.loanToValue;\n    const equity = purchasePrice - loanAmount;\n    // Calculate monthly payment for loan with new terms\n    const monthlyRate = assumptions.interestRate / 12;\n    const totalPayments = assumptions.amortizationYears * 12;\n    const debtService = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, totalPayments)) / (Math.pow(1 + monthlyRate, totalPayments) - 1);\n    const annualDebtService = debtService * 12;\n    // Investment metrics\n    const DSCR = NOI / annualDebtService;\n    const cashOnCashReturn = (NOI - annualDebtService) / equity;\n    // 5-year IRR calculation with new assumptions\n    console.log(\"=== Pro Forma Inputs ===\");\n    console.log(\"Purchase Price:\", purchasePrice);\n    console.log(\"Equity:\", equity);\n    console.log(\"Loan Amount:\", loanAmount);\n    console.log(\"Initial NOI:\", NOI);\n    console.log(\"Annual Debt Service:\", annualDebtService);\n    console.log(\"Assumptions:\", assumptions);\n    const { leveredIRR, unleveredIRR, irrBreakdown } = calculateDetailedIRR(purchasePrice, equity, loanAmount, NOI, annualDebtService, assumptions, dealData.rentRollData // Pass rent roll data for accurate calculations\n    );\n    return {\n        ...dealData,\n        purchasePrice,\n        priceDifference,\n        grossPotentialIncome,\n        effectiveGrossIncome,\n        operatingExpenses,\n        capRateValuation,\n        debtService: annualDebtService,\n        DSCR,\n        cashOnCashReturn,\n        leveredIRR,\n        unleveredIRR,\n        equity,\n        loanAmount,\n        vacancy,\n        expenseRatio: assumptions.expenseRatio,\n        marketCapRate: assumptions.marketCapRate,\n        irrBreakdown\n    };\n}\nfunction calculateDetailedIRR(purchasePrice, equity, loanAmount, initialNOI, initialDebtService, assumptions, rentRollData) {\n    const breakdown = [];\n    // Year 0 - Initial investment\n    breakdown.push({\n        year: 0,\n        grossIncome: 0,\n        operatingExpenses: 0,\n        NOI: 0,\n        debtService: 0,\n        cashFlowBeforeDebt: -purchasePrice,\n        cashFlowAfterDebt: -equity,\n        cumulativeCashFlowBeforeDebt: -purchasePrice,\n        cumulativeCashFlowAfterDebt: -equity,\n        remainingDebt: loanAmount,\n        propertyValue: purchasePrice,\n        exitEquity: 0,\n        totalReturnUnlevered: 0,\n        totalReturnLevered: 0,\n        annualCashOnCash: 0\n    });\n    // Years 1 to analysisTerm - Projected cash flows\n    let cumulativeCashFlowBeforeDebt = 0;\n    let cumulativeCashFlowAfterDebt = -equity;\n    let remainingDebt = loanAmount;\n    for(let year = 1; year <= assumptions.analysisTerm; year++){\n        // Calculate growth factors\n        const rentGrowth = Math.pow(1 + assumptions.rentGrowthRate, year);\n        const expenseGrowth = Math.pow(1 + assumptions.expenseGrowthRate, year);\n        // Calculate year-specific values\n        let yearNOI;\n        let yearOperatingExpenses;\n        let yearGrossIncome;\n        if (rentRollData && rentRollData.totalUnits > 0) {\n            // Calculate from actual rent roll data\n            const baseAnnualRent = rentRollData.totalMonthlyRent * 12;\n            yearGrossIncome = baseAnnualRent * rentGrowth;\n            yearOperatingExpenses = yearGrossIncome * assumptions.expenseRatio;\n            yearNOI = yearGrossIncome - yearOperatingExpenses;\n        } else {\n            // Fallback to NOI-based calculation\n            yearNOI = initialNOI * rentGrowth;\n            yearOperatingExpenses = yearNOI * assumptions.expenseRatio * expenseGrowth;\n            yearGrossIncome = yearNOI + yearOperatingExpenses;\n        }\n        // Calculate debt service (fixed for now, could be variable rate)\n        const yearDebtService = initialDebtService;\n        // Calculate cash flows (operating only)\n        const yearCashFlowBeforeDebt = yearNOI;\n        const yearCashFlowAfterDebt = yearNOI - yearDebtService;\n        // Update cumulative flows (operating only)\n        cumulativeCashFlowBeforeDebt += yearCashFlowBeforeDebt;\n        cumulativeCashFlowAfterDebt += yearCashFlowAfterDebt;\n        // Calculate remaining debt (simplified - could use actual amortization schedule)\n        remainingDebt = Math.max(0, remainingDebt - (yearDebtService - loanAmount * assumptions.interestRate));\n        // Calculate property value at exit (final year)\n        const propertyValue = year === assumptions.analysisTerm ? yearNOI / assumptions.exitCapRate : purchasePrice * Math.pow(1 + assumptions.rentGrowthRate, year);\n        // Calculate exit equity\n        const exitEquity = year === assumptions.analysisTerm ? propertyValue - remainingDebt : 0;\n        // Calculate annual cash on cash return\n        const annualCashOnCash = year === 0 ? 0 : yearCashFlowAfterDebt / equity;\n        // For final year, add property sale to cash flows\n        const finalCashFlowBeforeDebt = year === assumptions.analysisTerm ? yearCashFlowBeforeDebt + propertyValue : yearCashFlowBeforeDebt;\n        const finalCashFlowAfterDebt = year === assumptions.analysisTerm ? yearCashFlowAfterDebt + (propertyValue - remainingDebt) : yearCashFlowAfterDebt;\n        // Debug final year calculations\n        if (year === assumptions.analysisTerm) {\n            console.log(`=== Year ${assumptions.analysisTerm} Debug ===`);\n            console.log(`Year ${assumptions.analysisTerm} NOI:`, yearNOI);\n            console.log(`Property Value (Year ${assumptions.analysisTerm} NOI / Exit Cap):`, propertyValue);\n            console.log(\"Operating Cash Flow Before Debt:\", yearCashFlowBeforeDebt);\n            console.log(\"Operating Cash Flow After Debt:\", yearCashFlowAfterDebt);\n            console.log(\"Final Unlevered Cash Flow:\", finalCashFlowBeforeDebt);\n            console.log(\"Final Levered Cash Flow:\", finalCashFlowAfterDebt);\n            console.log(\"Remaining Debt:\", remainingDebt);\n            console.log(\"Exit Equity:\", exitEquity);\n            console.log(`=== End Year ${assumptions.analysisTerm} Debug ===`);\n        }\n        breakdown.push({\n            year,\n            grossIncome: yearGrossIncome,\n            operatingExpenses: yearOperatingExpenses,\n            NOI: yearNOI,\n            debtService: yearDebtService,\n            cashFlowBeforeDebt: finalCashFlowBeforeDebt,\n            cashFlowAfterDebt: finalCashFlowAfterDebt,\n            cumulativeCashFlowBeforeDebt: cumulativeCashFlowBeforeDebt + (year === assumptions.analysisTerm ? propertyValue : 0),\n            cumulativeCashFlowAfterDebt: cumulativeCashFlowAfterDebt + (year === assumptions.analysisTerm ? propertyValue - remainingDebt : 0),\n            remainingDebt,\n            propertyValue,\n            exitEquity,\n            totalReturnUnlevered: cumulativeCashFlowBeforeDebt + (year === assumptions.analysisTerm ? propertyValue : 0),\n            totalReturnLevered: cumulativeCashFlowAfterDebt + (year === assumptions.analysisTerm ? propertyValue - remainingDebt : 0),\n            annualCashOnCash\n        });\n    }\n    // Calculate IRR using Newton-Raphson method\n    console.log(\"=== IRR Calculation Debug ===\");\n    console.log(\"Levered cash flows:\", breakdown.map((row)=>row.cashFlowAfterDebt));\n    console.log(\"Unlevered cash flows:\", breakdown.map((row)=>row.cashFlowBeforeDebt));\n    const leveredIRR = calculateIRR(breakdown.map((row)=>row.cashFlowAfterDebt));\n    const unleveredIRR = calculateIRR(breakdown.map((row)=>row.cashFlowBeforeDebt));\n    console.log(`Final Results - Levered: ${(leveredIRR * 100).toFixed(2)}%, Unlevered: ${(unleveredIRR * 100).toFixed(2)}%`);\n    console.log(\"=== End IRR Debug ===\");\n    return {\n        leveredIRR,\n        unleveredIRR,\n        irrBreakdown: breakdown\n    };\n}\nfunction calculateIRR(cashFlows) {\n    // Newton-Raphson method for IRR calculation\n    let guess = 0.15 // Initial guess of 15%\n    ;\n    const maxIterations = 100;\n    const tolerance = 1e-6;\n    // Debug: log cash flows\n    console.log(\"Cash flows for IRR calculation:\", cashFlows);\n    // Check if we have valid cash flows\n    if (cashFlows.length < 2) {\n        console.log(\"Invalid cash flows length:\", cashFlows.length);\n        return 0.15;\n    }\n    // Check if first cash flow is negative (investment)\n    if (cashFlows[0] >= 0) {\n        console.log(\"First cash flow should be negative (investment):\", cashFlows[0]);\n        return 0.15;\n    }\n    // Check if we have positive cash flows later\n    const hasPositiveFlows = cashFlows.slice(1).some((flow)=>flow > 0);\n    if (!hasPositiveFlows) {\n        console.log(\"No positive cash flows found after initial investment\");\n        return 0.15;\n    }\n    for(let i = 0; i < maxIterations; i++){\n        const npv = calculateNPV(cashFlows, guess);\n        const derivative = calculateNPVDerivative(cashFlows, guess);\n        if (Math.abs(npv) < tolerance) {\n            console.log(`IRR converged to ${(guess * 100).toFixed(2)}% after ${i + 1} iterations`);\n            break;\n        }\n        // Avoid division by zero\n        if (Math.abs(derivative) < 1e-10) {\n            console.log(\"Derivative too small, resetting guess\");\n            guess = 0.15;\n            continue;\n        }\n        const newGuess = guess - npv / derivative;\n        // Ensure guess stays reasonable\n        if (newGuess < -0.9 || newGuess > 10) {\n            console.log(`Guess ${(newGuess * 100).toFixed(2)}% out of bounds, resetting to 15%`);\n            guess = 0.15;\n        } else {\n            guess = newGuess;\n        }\n    }\n    // Validate IRR is reasonable\n    if (guess < -0.9 || guess > 10) {\n        console.log(`Final IRR ${(guess * 100).toFixed(2)}% out of bounds, using fallback`);\n        return 0.15;\n    }\n    console.log(`Final IRR: ${(guess * 100).toFixed(2)}%`);\n    return guess;\n}\nfunction calculateNPV(cashFlows, rate) {\n    let npv = 0;\n    for(let i = 0; i < cashFlows.length; i++){\n        npv += cashFlows[i] / Math.pow(1 + rate, i);\n    }\n    return npv;\n}\nfunction calculateNPVDerivative(cashFlows, rate) {\n    let derivative = 0;\n    for(let i = 1; i < cashFlows.length; i++){\n        derivative -= i * cashFlows[i] / Math.pow(1 + rate, i + 1);\n    }\n    return derivative;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VyxDQUFDLE9BQU9BLFdBQVcsSUFBSTtZQUNwQy9GLFFBQVFvQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQzJELFdBQVcsR0FBRSxFQUFHaEIsT0FBTyxDQUFDLEdBQUcsaUNBQWlDLENBQUM7WUFDbkZFLFFBQVE7UUFDVixPQUFPO1lBQ0xBLFFBQVFjO1FBQ1Y7SUFDRjtJQUVBLDZCQUE2QjtJQUM3QixJQUFJZCxRQUFRLENBQUMsT0FBT0EsUUFBUSxJQUFJO1FBQzlCakYsUUFBUW9DLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDNkMsUUFBUSxHQUFFLEVBQUdGLE9BQU8sQ0FBQyxHQUFHLCtCQUErQixDQUFDO1FBQ2xGLE9BQU87SUFDVDtJQUVBL0UsUUFBUW9DLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDNkMsUUFBUSxHQUFFLEVBQUdGLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNyRCxPQUFPRTtBQUNUO0FBRUEsU0FBU1UsYUFBYVgsU0FBbUIsRUFBRWdCLElBQVk7SUFDckQsSUFBSU4sTUFBTTtJQUNWLElBQUssSUFBSUQsSUFBSSxHQUFHQSxJQUFJVCxVQUFVSSxNQUFNLEVBQUVLLElBQUs7UUFDekNDLE9BQU9WLFNBQVMsQ0FBQ1MsRUFBRSxHQUFHMUQsS0FBS0MsR0FBRyxDQUFDLElBQUlnRSxNQUFNUDtJQUMzQztJQUNBLE9BQU9DO0FBQ1Q7QUFFQSxTQUFTRyx1QkFBdUJiLFNBQW1CLEVBQUVnQixJQUFZO0lBQy9ELElBQUlKLGFBQWE7SUFDakIsSUFBSyxJQUFJSCxJQUFJLEdBQUdBLElBQUlULFVBQVVJLE1BQU0sRUFBRUssSUFBSztRQUN6Q0csY0FBYyxJQUFLWixTQUFTLENBQUNTLEVBQUUsR0FBSTFELEtBQUtDLEdBQUcsQ0FBQyxJQUFJZ0UsTUFBTVAsSUFBSTtJQUM1RDtJQUNBLE9BQU9HO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcmUtdW5kZXJ3cml0aW5nLWFwcC8uL2FwcC9hcGkvcmVjYWxjdWxhdGVJUlIvcm91dGUudHM/ZDIzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBEZWFsRGF0YSwgVW5kZXJ3cml0aW5nQXNzdW1wdGlvbnMgfSBmcm9tICcuLi8uLi90eXBlcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRlYWxEYXRhLCBuZXdBc3N1bXB0aW9ucywgbmV3UHJpY2UgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICAvLyBSZWNhbGN1bGF0ZSBJUlIgd2l0aCBuZXcgYXNzdW1wdGlvbnMgYW5kL29yIG5ldyBwcmljZVxuICAgIGNvbnN0IHJlY2FsY3VsYXRlZERhdGEgPSByZWNhbGN1bGF0ZUlSUldpdGhOZXdBc3N1bXB0aW9ucyhkZWFsRGF0YSwgbmV3QXNzdW1wdGlvbnMsIG5ld1ByaWNlKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlY2FsY3VsYXRlZERhdGEpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVjYWxjdWxhdGluZyBJUlI6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byByZWNhbGN1bGF0ZSBJUlInIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVjYWxjdWxhdGVJUlJXaXRoTmV3QXNzdW1wdGlvbnMoXG4gIGRlYWxEYXRhOiBEZWFsRGF0YSwgXG4gIG5ld0Fzc3VtcHRpb25zOiBVbmRlcndyaXRpbmdBc3N1bXB0aW9ucyxcbiAgbmV3UHJpY2U/OiBudW1iZXJcbik6IERlYWxEYXRhIHtcbiAgLy8gRXh0cmFjdCBiYXNlIGRhdGEgZnJvbSBvcmlnaW5hbCBkZWFsXG4gIGNvbnN0IHtcbiAgICBwcm9wZXJ0eU5hbWUsXG4gICAgd2hpc3BlclByaWNlLFxuICAgIHVuaXRzLFxuICAgIG9jY3VwYW5jeSxcbiAgICBhdmdSZW50LFxuICAgIGV4cGVuc2VzOiBwYXJzZWRFeHBlbnNlcyxcbiAgICBOT0k6IHBhcnNlZE5PSSxcbiAgICBtYXJrZXRDYXBSYXRlOiBvcmlnaW5hbE1hcmtldENhcFJhdGVcbiAgfSA9IGRlYWxEYXRhXG5cbiAgLy8gVXNlIG5ldyBhc3N1bXB0aW9uc1xuICBjb25zdCBhc3N1bXB0aW9ucyA9IG5ld0Fzc3VtcHRpb25zXG5cbiAgLy8gUmVjYWxjdWxhdGUgcHJvIGZvcm1hIG1ldHJpY3Mgd2l0aCBuZXcgYXNzdW1wdGlvbnNcbiAgY29uc3QgZ3Jvc3NQb3RlbnRpYWxJbmNvbWUgPSB1bml0cyAqIGF2Z1JlbnQgKiAxMlxuICBjb25zdCB2YWNhbmN5ID0gYXNzdW1wdGlvbnMudmFjYW5jeVxuICBjb25zdCBlZmZlY3RpdmVHcm9zc0luY29tZSA9IGdyb3NzUG90ZW50aWFsSW5jb21lICogKDEgLSB2YWNhbmN5KVxuICBcbiAgLy8gVXNlIHBhcnNlZCBleHBlbnNlcyBvciBjYWxjdWxhdGUgYmFzZWQgb24gbmV3IGFzc3VtcHRpb25cbiAgY29uc3Qgb3BlcmF0aW5nRXhwZW5zZXMgPSBwYXJzZWRFeHBlbnNlcyB8fCAoZWZmZWN0aXZlR3Jvc3NJbmNvbWUgKiBhc3N1bXB0aW9ucy5leHBlbnNlUmF0aW8pXG4gIFxuICAvLyBVc2UgcGFyc2VkIE5PSSBvciBjYWxjdWxhdGVcbiAgY29uc3QgTk9JID0gcGFyc2VkTk9JIHx8IChlZmZlY3RpdmVHcm9zc0luY29tZSAtIG9wZXJhdGluZ0V4cGVuc2VzKVxuICBcbiAgLy8gVXNlIG5ldyBwcmljZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGNhbGN1bGF0ZSBmcm9tIGNhcCByYXRlXG4gIGNvbnN0IHB1cmNoYXNlUHJpY2UgPSBuZXdQcmljZSB8fCAoTk9JIC8gYXNzdW1wdGlvbnMubWFya2V0Q2FwUmF0ZSlcbiAgXG4gIC8vIENhbGN1bGF0ZSBwcmljZSBkaWZmZXJlbmNlICh3aGlzcGVyIHByaWNlIC0gY2FsY3VsYXRlZCBwcmljZSlcbiAgLy8gSWYgdXNpbmcgd2hpc3BlciBwcmljZSwgZGlmZmVyZW5jZSBpcyAwLiBJZiB1c2luZyBjdXN0b20gcHJpY2UsIGRpZmZlcmVuY2UgaXMgY3VzdG9tIC0gbWFya2V0XG4gIGxldCBwcmljZURpZmZlcmVuY2U6IG51bWJlclxuICBpZiAobmV3UHJpY2UgPT09IHdoaXNwZXJQcmljZSkge1xuICAgIHByaWNlRGlmZmVyZW5jZSA9IDAgLy8gVXNpbmcgd2hpc3BlciBwcmljZVxuICB9IGVsc2UgaWYgKG5ld1ByaWNlICYmIG5ld1ByaWNlICE9PSAoTk9JIC8gYXNzdW1wdGlvbnMubWFya2V0Q2FwUmF0ZSkpIHtcbiAgICBjb25zdCBtYXJrZXRWYWx1ZSA9IE5PSSAvIGFzc3VtcHRpb25zLm1hcmtldENhcFJhdGVcbiAgICBwcmljZURpZmZlcmVuY2UgPSBuZXdQcmljZSAtIG1hcmtldFZhbHVlIC8vIEN1c3RvbSBwcmljZSB2cyBtYXJrZXRcbiAgfSBlbHNlIHtcbiAgICBwcmljZURpZmZlcmVuY2UgPSB3aGlzcGVyUHJpY2UgJiYgd2hpc3BlclByaWNlID4gMCA/IHdoaXNwZXJQcmljZSAtIHB1cmNoYXNlUHJpY2UgOiAwIC8vIE9yaWdpbmFsIGxvZ2ljXG4gIH1cbiAgXG4gIC8vIENhcCByYXRlIHZhbHVhdGlvbiAoc2FtZSBhcyBwdXJjaGFzZSBwcmljZSlcbiAgY29uc3QgY2FwUmF0ZVZhbHVhdGlvbiA9IHB1cmNoYXNlUHJpY2VcbiAgXG4gIC8vIEZpbmFuY2luZyBjYWxjdWxhdGlvbnMgd2l0aCBuZXcgYXNzdW1wdGlvbnNcbiAgY29uc3QgbG9hbkFtb3VudCA9IHB1cmNoYXNlUHJpY2UgKiBhc3N1bXB0aW9ucy5sb2FuVG9WYWx1ZVxuICBjb25zdCBlcXVpdHkgPSBwdXJjaGFzZVByaWNlIC0gbG9hbkFtb3VudFxuICBcbiAgLy8gQ2FsY3VsYXRlIG1vbnRobHkgcGF5bWVudCBmb3IgbG9hbiB3aXRoIG5ldyB0ZXJtc1xuICBjb25zdCBtb250aGx5UmF0ZSA9IGFzc3VtcHRpb25zLmludGVyZXN0UmF0ZSAvIDEyXG4gIGNvbnN0IHRvdGFsUGF5bWVudHMgPSBhc3N1bXB0aW9ucy5hbW9ydGl6YXRpb25ZZWFycyAqIDEyXG4gIGNvbnN0IGRlYnRTZXJ2aWNlID0gbG9hbkFtb3VudCAqIChtb250aGx5UmF0ZSAqIE1hdGgucG93KDEgKyBtb250aGx5UmF0ZSwgdG90YWxQYXltZW50cykpIC8gXG4gICAgICAgICAgICAgICAgICAgICAoTWF0aC5wb3coMSArIG1vbnRobHlSYXRlLCB0b3RhbFBheW1lbnRzKSAtIDEpXG4gIGNvbnN0IGFubnVhbERlYnRTZXJ2aWNlID0gZGVidFNlcnZpY2UgKiAxMlxuICBcbiAgLy8gSW52ZXN0bWVudCBtZXRyaWNzXG4gIGNvbnN0IERTQ1IgPSBOT0kgLyBhbm51YWxEZWJ0U2VydmljZVxuICBjb25zdCBjYXNoT25DYXNoUmV0dXJuID0gKE5PSSAtIGFubnVhbERlYnRTZXJ2aWNlKSAvIGVxdWl0eVxuICBcbiAgLy8gNS15ZWFyIElSUiBjYWxjdWxhdGlvbiB3aXRoIG5ldyBhc3N1bXB0aW9uc1xuICBjb25zb2xlLmxvZygnPT09IFBybyBGb3JtYSBJbnB1dHMgPT09JylcbiAgY29uc29sZS5sb2coJ1B1cmNoYXNlIFByaWNlOicsIHB1cmNoYXNlUHJpY2UpXG4gIGNvbnNvbGUubG9nKCdFcXVpdHk6JywgZXF1aXR5KVxuICBjb25zb2xlLmxvZygnTG9hbiBBbW91bnQ6JywgbG9hbkFtb3VudClcbiAgY29uc29sZS5sb2coJ0luaXRpYWwgTk9JOicsIE5PSSlcbiAgY29uc29sZS5sb2coJ0FubnVhbCBEZWJ0IFNlcnZpY2U6JywgYW5udWFsRGVidFNlcnZpY2UpXG4gIGNvbnNvbGUubG9nKCdBc3N1bXB0aW9uczonLCBhc3N1bXB0aW9ucylcbiAgXG4gIGNvbnN0IHsgbGV2ZXJlZElSUiwgdW5sZXZlcmVkSVJSLCBpcnJCcmVha2Rvd24gfSA9IGNhbGN1bGF0ZURldGFpbGVkSVJSKFxuICAgIHB1cmNoYXNlUHJpY2UsXG4gICAgZXF1aXR5LFxuICAgIGxvYW5BbW91bnQsXG4gICAgTk9JLFxuICAgIGFubnVhbERlYnRTZXJ2aWNlLFxuICAgIGFzc3VtcHRpb25zLFxuICAgIGRlYWxEYXRhLnJlbnRSb2xsRGF0YSAvLyBQYXNzIHJlbnQgcm9sbCBkYXRhIGZvciBhY2N1cmF0ZSBjYWxjdWxhdGlvbnNcbiAgKVxuXG4gIHJldHVybiB7XG4gICAgLi4uZGVhbERhdGEsXG4gICAgcHVyY2hhc2VQcmljZSxcbiAgICBwcmljZURpZmZlcmVuY2UsXG4gICAgZ3Jvc3NQb3RlbnRpYWxJbmNvbWUsXG4gICAgZWZmZWN0aXZlR3Jvc3NJbmNvbWUsXG4gICAgb3BlcmF0aW5nRXhwZW5zZXMsXG4gICAgY2FwUmF0ZVZhbHVhdGlvbixcbiAgICBkZWJ0U2VydmljZTogYW5udWFsRGVidFNlcnZpY2UsXG4gICAgRFNDUixcbiAgICBjYXNoT25DYXNoUmV0dXJuLFxuICAgIGxldmVyZWRJUlIsXG4gICAgdW5sZXZlcmVkSVJSLFxuICAgIGVxdWl0eSxcbiAgICBsb2FuQW1vdW50LFxuICAgIHZhY2FuY3ksXG4gICAgZXhwZW5zZVJhdGlvOiBhc3N1bXB0aW9ucy5leHBlbnNlUmF0aW8sXG4gICAgbWFya2V0Q2FwUmF0ZTogYXNzdW1wdGlvbnMubWFya2V0Q2FwUmF0ZSxcbiAgICBpcnJCcmVha2Rvd25cbiAgfVxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVEZXRhaWxlZElSUihcbiAgcHVyY2hhc2VQcmljZTogbnVtYmVyLFxuICBlcXVpdHk6IG51bWJlcixcbiAgbG9hbkFtb3VudDogbnVtYmVyLFxuICBpbml0aWFsTk9JOiBudW1iZXIsXG4gIGluaXRpYWxEZWJ0U2VydmljZTogbnVtYmVyLFxuICBhc3N1bXB0aW9uczogVW5kZXJ3cml0aW5nQXNzdW1wdGlvbnMsXG4gIHJlbnRSb2xsRGF0YT86IGFueVxuKSB7XG4gIGNvbnN0IGJyZWFrZG93biA9IFtdXG4gIFxuICAvLyBZZWFyIDAgLSBJbml0aWFsIGludmVzdG1lbnRcbiAgYnJlYWtkb3duLnB1c2goe1xuICAgIHllYXI6IDAsXG4gICAgZ3Jvc3NJbmNvbWU6IDAsXG4gICAgb3BlcmF0aW5nRXhwZW5zZXM6IDAsXG4gICAgTk9JOiAwLFxuICAgIGRlYnRTZXJ2aWNlOiAwLFxuICAgIGNhc2hGbG93QmVmb3JlRGVidDogLXB1cmNoYXNlUHJpY2UsIC8vIFVubGV2ZXJlZDogcGF5IGZ1bGwgcHJvcGVydHkgcHJpY2VcbiAgICBjYXNoRmxvd0FmdGVyRGVidDogLWVxdWl0eSwgLy8gTGV2ZXJlZDogcGF5IG9ubHkgZXF1aXR5IHBvcnRpb25cbiAgICBjdW11bGF0aXZlQ2FzaEZsb3dCZWZvcmVEZWJ0OiAtcHVyY2hhc2VQcmljZSxcbiAgICBjdW11bGF0aXZlQ2FzaEZsb3dBZnRlckRlYnQ6IC1lcXVpdHksXG4gICAgcmVtYWluaW5nRGVidDogbG9hbkFtb3VudCxcbiAgICBwcm9wZXJ0eVZhbHVlOiBwdXJjaGFzZVByaWNlLFxuICAgIGV4aXRFcXVpdHk6IDAsXG4gICAgdG90YWxSZXR1cm5VbmxldmVyZWQ6IDAsXG4gICAgdG90YWxSZXR1cm5MZXZlcmVkOiAwLFxuICAgIGFubnVhbENhc2hPbkNhc2g6IDBcbiAgfSlcblxuICAvLyBZZWFycyAxIHRvIGFuYWx5c2lzVGVybSAtIFByb2plY3RlZCBjYXNoIGZsb3dzXG4gIGxldCBjdW11bGF0aXZlQ2FzaEZsb3dCZWZvcmVEZWJ0ID0gMFxuICBsZXQgY3VtdWxhdGl2ZUNhc2hGbG93QWZ0ZXJEZWJ0ID0gLWVxdWl0eVxuICBsZXQgcmVtYWluaW5nRGVidCA9IGxvYW5BbW91bnRcblxuICBmb3IgKGxldCB5ZWFyID0gMTsgeWVhciA8PSBhc3N1bXB0aW9ucy5hbmFseXNpc1Rlcm07IHllYXIrKykge1xuICAgIC8vIENhbGN1bGF0ZSBncm93dGggZmFjdG9yc1xuICAgIGNvbnN0IHJlbnRHcm93dGggPSBNYXRoLnBvdygxICsgYXNzdW1wdGlvbnMucmVudEdyb3d0aFJhdGUsIHllYXIpXG4gICAgY29uc3QgZXhwZW5zZUdyb3d0aCA9IE1hdGgucG93KDEgKyBhc3N1bXB0aW9ucy5leHBlbnNlR3Jvd3RoUmF0ZSwgeWVhcilcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgeWVhci1zcGVjaWZpYyB2YWx1ZXNcbiAgICBsZXQgeWVhck5PSTogbnVtYmVyXG4gICAgbGV0IHllYXJPcGVyYXRpbmdFeHBlbnNlczogbnVtYmVyXG4gICAgbGV0IHllYXJHcm9zc0luY29tZTogbnVtYmVyXG4gICAgXG4gICAgaWYgKHJlbnRSb2xsRGF0YSAmJiByZW50Um9sbERhdGEudG90YWxVbml0cyA+IDApIHtcbiAgICAgIC8vIENhbGN1bGF0ZSBmcm9tIGFjdHVhbCByZW50IHJvbGwgZGF0YVxuICAgICAgY29uc3QgYmFzZUFubnVhbFJlbnQgPSByZW50Um9sbERhdGEudG90YWxNb250aGx5UmVudCAqIDEyXG4gICAgICB5ZWFyR3Jvc3NJbmNvbWUgPSBiYXNlQW5udWFsUmVudCAqIHJlbnRHcm93dGhcbiAgICAgIHllYXJPcGVyYXRpbmdFeHBlbnNlcyA9IHllYXJHcm9zc0luY29tZSAqIGFzc3VtcHRpb25zLmV4cGVuc2VSYXRpb1xuICAgICAgeWVhck5PSSA9IHllYXJHcm9zc0luY29tZSAtIHllYXJPcGVyYXRpbmdFeHBlbnNlc1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBOT0ktYmFzZWQgY2FsY3VsYXRpb25cbiAgICAgIHllYXJOT0kgPSBpbml0aWFsTk9JICogcmVudEdyb3d0aFxuICAgICAgeWVhck9wZXJhdGluZ0V4cGVuc2VzID0geWVhck5PSSAqIGFzc3VtcHRpb25zLmV4cGVuc2VSYXRpbyAqIGV4cGVuc2VHcm93dGhcbiAgICAgIHllYXJHcm9zc0luY29tZSA9IHllYXJOT0kgKyB5ZWFyT3BlcmF0aW5nRXhwZW5zZXNcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGRlYnQgc2VydmljZSAoZml4ZWQgZm9yIG5vdywgY291bGQgYmUgdmFyaWFibGUgcmF0ZSlcbiAgICBjb25zdCB5ZWFyRGVidFNlcnZpY2UgPSBpbml0aWFsRGVidFNlcnZpY2VcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgY2FzaCBmbG93cyAob3BlcmF0aW5nIG9ubHkpXG4gICAgY29uc3QgeWVhckNhc2hGbG93QmVmb3JlRGVidCA9IHllYXJOT0lcbiAgICBjb25zdCB5ZWFyQ2FzaEZsb3dBZnRlckRlYnQgPSB5ZWFyTk9JIC0geWVhckRlYnRTZXJ2aWNlXG4gICAgXG4gICAgLy8gVXBkYXRlIGN1bXVsYXRpdmUgZmxvd3MgKG9wZXJhdGluZyBvbmx5KVxuICAgIGN1bXVsYXRpdmVDYXNoRmxvd0JlZm9yZURlYnQgKz0geWVhckNhc2hGbG93QmVmb3JlRGVidFxuICAgIGN1bXVsYXRpdmVDYXNoRmxvd0FmdGVyRGVidCArPSB5ZWFyQ2FzaEZsb3dBZnRlckRlYnRcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgcmVtYWluaW5nIGRlYnQgKHNpbXBsaWZpZWQgLSBjb3VsZCB1c2UgYWN0dWFsIGFtb3J0aXphdGlvbiBzY2hlZHVsZSlcbiAgICByZW1haW5pbmdEZWJ0ID0gTWF0aC5tYXgoMCwgcmVtYWluaW5nRGVidCAtICh5ZWFyRGVidFNlcnZpY2UgLSAobG9hbkFtb3VudCAqIGFzc3VtcHRpb25zLmludGVyZXN0UmF0ZSkpKVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBwcm9wZXJ0eSB2YWx1ZSBhdCBleGl0IChmaW5hbCB5ZWFyKVxuICAgIGNvbnN0IHByb3BlcnR5VmFsdWUgPSB5ZWFyID09PSBhc3N1bXB0aW9ucy5hbmFseXNpc1Rlcm0gPyBcbiAgICAgICh5ZWFyTk9JIC8gYXNzdW1wdGlvbnMuZXhpdENhcFJhdGUpIDogXG4gICAgICBwdXJjaGFzZVByaWNlICogTWF0aC5wb3coMSArIGFzc3VtcHRpb25zLnJlbnRHcm93dGhSYXRlLCB5ZWFyKVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBleGl0IGVxdWl0eVxuICAgIGNvbnN0IGV4aXRFcXVpdHkgPSB5ZWFyID09PSBhc3N1bXB0aW9ucy5hbmFseXNpc1Rlcm0gPyBwcm9wZXJ0eVZhbHVlIC0gcmVtYWluaW5nRGVidCA6IDBcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgYW5udWFsIGNhc2ggb24gY2FzaCByZXR1cm5cbiAgICBjb25zdCBhbm51YWxDYXNoT25DYXNoID0geWVhciA9PT0gMCA/IDAgOiB5ZWFyQ2FzaEZsb3dBZnRlckRlYnQgLyBlcXVpdHlcbiAgICBcbiAgICAvLyBGb3IgZmluYWwgeWVhciwgYWRkIHByb3BlcnR5IHNhbGUgdG8gY2FzaCBmbG93c1xuICAgIGNvbnN0IGZpbmFsQ2FzaEZsb3dCZWZvcmVEZWJ0ID0geWVhciA9PT0gYXNzdW1wdGlvbnMuYW5hbHlzaXNUZXJtID8geWVhckNhc2hGbG93QmVmb3JlRGVidCArIHByb3BlcnR5VmFsdWUgOiB5ZWFyQ2FzaEZsb3dCZWZvcmVEZWJ0XG4gICAgY29uc3QgZmluYWxDYXNoRmxvd0FmdGVyRGVidCA9IHllYXIgPT09IGFzc3VtcHRpb25zLmFuYWx5c2lzVGVybSA/IHllYXJDYXNoRmxvd0FmdGVyRGVidCArIChwcm9wZXJ0eVZhbHVlIC0gcmVtYWluaW5nRGVidCkgOiB5ZWFyQ2FzaEZsb3dBZnRlckRlYnRcbiAgICBcbiAgICAvLyBEZWJ1ZyBmaW5hbCB5ZWFyIGNhbGN1bGF0aW9uc1xuICAgIGlmICh5ZWFyID09PSBhc3N1bXB0aW9ucy5hbmFseXNpc1Rlcm0pIHtcbiAgICAgIGNvbnNvbGUubG9nKGA9PT0gWWVhciAke2Fzc3VtcHRpb25zLmFuYWx5c2lzVGVybX0gRGVidWcgPT09YClcbiAgICAgIGNvbnNvbGUubG9nKGBZZWFyICR7YXNzdW1wdGlvbnMuYW5hbHlzaXNUZXJtfSBOT0k6YCwgeWVhck5PSSlcbiAgICAgIGNvbnNvbGUubG9nKGBQcm9wZXJ0eSBWYWx1ZSAoWWVhciAke2Fzc3VtcHRpb25zLmFuYWx5c2lzVGVybX0gTk9JIC8gRXhpdCBDYXApOmAsIHByb3BlcnR5VmFsdWUpXG4gICAgICBjb25zb2xlLmxvZygnT3BlcmF0aW5nIENhc2ggRmxvdyBCZWZvcmUgRGVidDonLCB5ZWFyQ2FzaEZsb3dCZWZvcmVEZWJ0KVxuICAgICAgY29uc29sZS5sb2coJ09wZXJhdGluZyBDYXNoIEZsb3cgQWZ0ZXIgRGVidDonLCB5ZWFyQ2FzaEZsb3dBZnRlckRlYnQpXG4gICAgICBjb25zb2xlLmxvZygnRmluYWwgVW5sZXZlcmVkIENhc2ggRmxvdzonLCBmaW5hbENhc2hGbG93QmVmb3JlRGVidClcbiAgICAgIGNvbnNvbGUubG9nKCdGaW5hbCBMZXZlcmVkIENhc2ggRmxvdzonLCBmaW5hbENhc2hGbG93QWZ0ZXJEZWJ0KVxuICAgICAgY29uc29sZS5sb2coJ1JlbWFpbmluZyBEZWJ0OicsIHJlbWFpbmluZ0RlYnQpXG4gICAgICBjb25zb2xlLmxvZygnRXhpdCBFcXVpdHk6JywgZXhpdEVxdWl0eSlcbiAgICAgIGNvbnNvbGUubG9nKGA9PT0gRW5kIFllYXIgJHthc3N1bXB0aW9ucy5hbmFseXNpc1Rlcm19IERlYnVnID09PWApXG4gICAgfVxuICAgIFxuICAgIGJyZWFrZG93bi5wdXNoKHtcbiAgICAgIHllYXIsXG4gICAgICBncm9zc0luY29tZTogeWVhckdyb3NzSW5jb21lLFxuICAgICAgb3BlcmF0aW5nRXhwZW5zZXM6IHllYXJPcGVyYXRpbmdFeHBlbnNlcyxcbiAgICAgIE5PSTogeWVhck5PSSxcbiAgICAgIGRlYnRTZXJ2aWNlOiB5ZWFyRGVidFNlcnZpY2UsXG4gICAgICBjYXNoRmxvd0JlZm9yZURlYnQ6IGZpbmFsQ2FzaEZsb3dCZWZvcmVEZWJ0LFxuICAgICAgY2FzaEZsb3dBZnRlckRlYnQ6IGZpbmFsQ2FzaEZsb3dBZnRlckRlYnQsXG4gICAgICBjdW11bGF0aXZlQ2FzaEZsb3dCZWZvcmVEZWJ0OiBjdW11bGF0aXZlQ2FzaEZsb3dCZWZvcmVEZWJ0ICsgKHllYXIgPT09IGFzc3VtcHRpb25zLmFuYWx5c2lzVGVybSA/IHByb3BlcnR5VmFsdWUgOiAwKSxcbiAgICAgIGN1bXVsYXRpdmVDYXNoRmxvd0FmdGVyRGVidDogY3VtdWxhdGl2ZUNhc2hGbG93QWZ0ZXJEZWJ0ICsgKHllYXIgPT09IGFzc3VtcHRpb25zLmFuYWx5c2lzVGVybSA/IChwcm9wZXJ0eVZhbHVlIC0gcmVtYWluaW5nRGVidCkgOiAwKSxcbiAgICAgIHJlbWFpbmluZ0RlYnQsXG4gICAgICBwcm9wZXJ0eVZhbHVlLFxuICAgICAgZXhpdEVxdWl0eSxcbiAgICAgIHRvdGFsUmV0dXJuVW5sZXZlcmVkOiBjdW11bGF0aXZlQ2FzaEZsb3dCZWZvcmVEZWJ0ICsgKHllYXIgPT09IGFzc3VtcHRpb25zLmFuYWx5c2lzVGVybSA/IHByb3BlcnR5VmFsdWUgOiAwKSxcbiAgICAgIHRvdGFsUmV0dXJuTGV2ZXJlZDogY3VtdWxhdGl2ZUNhc2hGbG93QWZ0ZXJEZWJ0ICsgKHllYXIgPT09IGFzc3VtcHRpb25zLmFuYWx5c2lzVGVybSA/IChwcm9wZXJ0eVZhbHVlIC0gcmVtYWluaW5nRGVidCkgOiAwKSxcbiAgICAgIGFubnVhbENhc2hPbkNhc2hcbiAgICB9KVxuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIElSUiB1c2luZyBOZXd0b24tUmFwaHNvbiBtZXRob2RcbiAgY29uc29sZS5sb2coJz09PSBJUlIgQ2FsY3VsYXRpb24gRGVidWcgPT09JylcbiAgY29uc29sZS5sb2coJ0xldmVyZWQgY2FzaCBmbG93czonLCBicmVha2Rvd24ubWFwKHJvdyA9PiByb3cuY2FzaEZsb3dBZnRlckRlYnQpKVxuICBjb25zb2xlLmxvZygnVW5sZXZlcmVkIGNhc2ggZmxvd3M6JywgYnJlYWtkb3duLm1hcChyb3cgPT4gcm93LmNhc2hGbG93QmVmb3JlRGVidCkpXG4gIFxuICBjb25zdCBsZXZlcmVkSVJSID0gY2FsY3VsYXRlSVJSKGJyZWFrZG93bi5tYXAocm93ID0+IHJvdy5jYXNoRmxvd0FmdGVyRGVidCkpXG4gIGNvbnN0IHVubGV2ZXJlZElSUiA9IGNhbGN1bGF0ZUlSUihicmVha2Rvd24ubWFwKHJvdyA9PiByb3cuY2FzaEZsb3dCZWZvcmVEZWJ0KSlcbiAgXG4gIGNvbnNvbGUubG9nKGBGaW5hbCBSZXN1bHRzIC0gTGV2ZXJlZDogJHsobGV2ZXJlZElSUiAqIDEwMCkudG9GaXhlZCgyKX0lLCBVbmxldmVyZWQ6ICR7KHVubGV2ZXJlZElSUiAqIDEwMCkudG9GaXhlZCgyKX0lYClcbiAgY29uc29sZS5sb2coJz09PSBFbmQgSVJSIERlYnVnID09PScpXG5cbiAgcmV0dXJuIHsgbGV2ZXJlZElSUiwgdW5sZXZlcmVkSVJSLCBpcnJCcmVha2Rvd246IGJyZWFrZG93biB9XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUlSUihjYXNoRmxvd3M6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgLy8gTmV3dG9uLVJhcGhzb24gbWV0aG9kIGZvciBJUlIgY2FsY3VsYXRpb25cbiAgbGV0IGd1ZXNzID0gMC4xNSAvLyBJbml0aWFsIGd1ZXNzIG9mIDE1JVxuICBjb25zdCBtYXhJdGVyYXRpb25zID0gMTAwXG4gIGNvbnN0IHRvbGVyYW5jZSA9IDFlLTZcbiAgXG4gIC8vIERlYnVnOiBsb2cgY2FzaCBmbG93c1xuICBjb25zb2xlLmxvZygnQ2FzaCBmbG93cyBmb3IgSVJSIGNhbGN1bGF0aW9uOicsIGNhc2hGbG93cylcbiAgXG4gIC8vIENoZWNrIGlmIHdlIGhhdmUgdmFsaWQgY2FzaCBmbG93c1xuICBpZiAoY2FzaEZsb3dzLmxlbmd0aCA8IDIpIHtcbiAgICBjb25zb2xlLmxvZygnSW52YWxpZCBjYXNoIGZsb3dzIGxlbmd0aDonLCBjYXNoRmxvd3MubGVuZ3RoKVxuICAgIHJldHVybiAwLjE1XG4gIH1cbiAgXG4gIC8vIENoZWNrIGlmIGZpcnN0IGNhc2ggZmxvdyBpcyBuZWdhdGl2ZSAoaW52ZXN0bWVudClcbiAgaWYgKGNhc2hGbG93c1swXSA+PSAwKSB7XG4gICAgY29uc29sZS5sb2coJ0ZpcnN0IGNhc2ggZmxvdyBzaG91bGQgYmUgbmVnYXRpdmUgKGludmVzdG1lbnQpOicsIGNhc2hGbG93c1swXSlcbiAgICByZXR1cm4gMC4xNVxuICB9XG4gIFxuICAvLyBDaGVjayBpZiB3ZSBoYXZlIHBvc2l0aXZlIGNhc2ggZmxvd3MgbGF0ZXJcbiAgY29uc3QgaGFzUG9zaXRpdmVGbG93cyA9IGNhc2hGbG93cy5zbGljZSgxKS5zb21lKGZsb3cgPT4gZmxvdyA+IDApXG4gIGlmICghaGFzUG9zaXRpdmVGbG93cykge1xuICAgIGNvbnNvbGUubG9nKCdObyBwb3NpdGl2ZSBjYXNoIGZsb3dzIGZvdW5kIGFmdGVyIGluaXRpYWwgaW52ZXN0bWVudCcpXG4gICAgcmV0dXJuIDAuMTVcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4SXRlcmF0aW9uczsgaSsrKSB7XG4gICAgY29uc3QgbnB2ID0gY2FsY3VsYXRlTlBWKGNhc2hGbG93cywgZ3Vlc3MpXG4gICAgY29uc3QgZGVyaXZhdGl2ZSA9IGNhbGN1bGF0ZU5QVkRlcml2YXRpdmUoY2FzaEZsb3dzLCBndWVzcylcbiAgICBcbiAgICBpZiAoTWF0aC5hYnMobnB2KSA8IHRvbGVyYW5jZSkge1xuICAgICAgY29uc29sZS5sb2coYElSUiBjb252ZXJnZWQgdG8gJHsoZ3Vlc3MgKiAxMDApLnRvRml4ZWQoMil9JSBhZnRlciAke2kgKyAxfSBpdGVyYXRpb25zYClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIFxuICAgIC8vIEF2b2lkIGRpdmlzaW9uIGJ5IHplcm9cbiAgICBpZiAoTWF0aC5hYnMoZGVyaXZhdGl2ZSkgPCAxZS0xMCkge1xuICAgICAgY29uc29sZS5sb2coJ0Rlcml2YXRpdmUgdG9vIHNtYWxsLCByZXNldHRpbmcgZ3Vlc3MnKVxuICAgICAgZ3Vlc3MgPSAwLjE1XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBuZXdHdWVzcyA9IGd1ZXNzIC0gbnB2IC8gZGVyaXZhdGl2ZVxuICAgIFxuICAgIC8vIEVuc3VyZSBndWVzcyBzdGF5cyByZWFzb25hYmxlXG4gICAgaWYgKG5ld0d1ZXNzIDwgLTAuOSB8fCBuZXdHdWVzcyA+IDEwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgR3Vlc3MgJHsobmV3R3Vlc3MgKiAxMDApLnRvRml4ZWQoMil9JSBvdXQgb2YgYm91bmRzLCByZXNldHRpbmcgdG8gMTUlYClcbiAgICAgIGd1ZXNzID0gMC4xNVxuICAgIH0gZWxzZSB7XG4gICAgICBndWVzcyA9IG5ld0d1ZXNzXG4gICAgfVxuICB9XG5cbiAgLy8gVmFsaWRhdGUgSVJSIGlzIHJlYXNvbmFibGVcbiAgaWYgKGd1ZXNzIDwgLTAuOSB8fCBndWVzcyA+IDEwKSB7XG4gICAgY29uc29sZS5sb2coYEZpbmFsIElSUiAkeyhndWVzcyAqIDEwMCkudG9GaXhlZCgyKX0lIG91dCBvZiBib3VuZHMsIHVzaW5nIGZhbGxiYWNrYClcbiAgICByZXR1cm4gMC4xNVxuICB9XG5cbiAgY29uc29sZS5sb2coYEZpbmFsIElSUjogJHsoZ3Vlc3MgKiAxMDApLnRvRml4ZWQoMil9JWApXG4gIHJldHVybiBndWVzc1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVOUFYoY2FzaEZsb3dzOiBudW1iZXJbXSwgcmF0ZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IG5wdiA9IDBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXNoRmxvd3MubGVuZ3RoOyBpKyspIHtcbiAgICBucHYgKz0gY2FzaEZsb3dzW2ldIC8gTWF0aC5wb3coMSArIHJhdGUsIGkpXG4gIH1cbiAgcmV0dXJuIG5wdlxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVOUFZEZXJpdmF0aXZlKGNhc2hGbG93czogbnVtYmVyW10sIHJhdGU6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCBkZXJpdmF0aXZlID0gMFxuICBmb3IgKGxldCBpID0gMTsgaSA8IGNhc2hGbG93cy5sZW5ndGg7IGkrKykge1xuICAgIGRlcml2YXRpdmUgLT0gKGkgKiBjYXNoRmxvd3NbaV0pIC8gTWF0aC5wb3coMSArIHJhdGUsIGkgKyAxKVxuICB9XG4gIHJldHVybiBkZXJpdmF0aXZlXG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiUE9TVCIsInJlcXVlc3QiLCJkZWFsRGF0YSIsIm5ld0Fzc3VtcHRpb25zIiwibmV3UHJpY2UiLCJqc29uIiwicmVjYWxjdWxhdGVkRGF0YSIsInJlY2FsY3VsYXRlSVJSV2l0aE5ld0Fzc3VtcHRpb25zIiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIiwicHJvcGVydHlOYW1lIiwid2hpc3BlclByaWNlIiwidW5pdHMiLCJvY2N1cGFuY3kiLCJhdmdSZW50IiwiZXhwZW5zZXMiLCJwYXJzZWRFeHBlbnNlcyIsIk5PSSIsInBhcnNlZE5PSSIsIm1hcmtldENhcFJhdGUiLCJvcmlnaW5hbE1hcmtldENhcFJhdGUiLCJhc3N1bXB0aW9ucyIsImdyb3NzUG90ZW50aWFsSW5jb21lIiwidmFjYW5jeSIsImVmZmVjdGl2ZUdyb3NzSW5jb21lIiwib3BlcmF0aW5nRXhwZW5zZXMiLCJleHBlbnNlUmF0aW8iLCJwdXJjaGFzZVByaWNlIiwicHJpY2VEaWZmZXJlbmNlIiwibWFya2V0VmFsdWUiLCJjYXBSYXRlVmFsdWF0aW9uIiwibG9hbkFtb3VudCIsImxvYW5Ub1ZhbHVlIiwiZXF1aXR5IiwibW9udGhseVJhdGUiLCJpbnRlcmVzdFJhdGUiLCJ0b3RhbFBheW1lbnRzIiwiYW1vcnRpemF0aW9uWWVhcnMiLCJkZWJ0U2VydmljZSIsIk1hdGgiLCJwb3ciLCJhbm51YWxEZWJ0U2VydmljZSIsIkRTQ1IiLCJjYXNoT25DYXNoUmV0dXJuIiwibG9nIiwibGV2ZXJlZElSUiIsInVubGV2ZXJlZElSUiIsImlyckJyZWFrZG93biIsImNhbGN1bGF0ZURldGFpbGVkSVJSIiwicmVudFJvbGxEYXRhIiwiaW5pdGlhbE5PSSIsImluaXRpYWxEZWJ0U2VydmljZSIsImJyZWFrZG93biIsInB1c2giLCJ5ZWFyIiwiZ3Jvc3NJbmNvbWUiLCJjYXNoRmxvd0JlZm9yZURlYnQiLCJjYXNoRmxvd0FmdGVyRGVidCIsImN1bXVsYXRpdmVDYXNoRmxvd0JlZm9yZURlYnQiLCJjdW11bGF0aXZlQ2FzaEZsb3dBZnRlckRlYnQiLCJyZW1haW5pbmdEZWJ0IiwicHJvcGVydHlWYWx1ZSIsImV4aXRFcXVpdHkiLCJ0b3RhbFJldHVyblVubGV2ZXJlZCIsInRvdGFsUmV0dXJuTGV2ZXJlZCIsImFubnVhbENhc2hPbkNhc2giLCJhbmFseXNpc1Rlcm0iLCJyZW50R3Jvd3RoIiwicmVudEdyb3d0aFJhdGUiLCJleHBlbnNlR3Jvd3RoIiwiZXhwZW5zZUdyb3d0aFJhdGUiLCJ5ZWFyTk9JIiwieWVhck9wZXJhdGluZ0V4cGVuc2VzIiwieWVhckdyb3NzSW5jb21lIiwidG90YWxVbml0cyIsImJhc2VBbm51YWxSZW50IiwidG90YWxNb250aGx5UmVudCIsInllYXJEZWJ0U2VydmljZSIsInllYXJDYXNoRmxvd0JlZm9yZURlYnQiLCJ5ZWFyQ2FzaEZsb3dBZnRlckRlYnQiLCJtYXgiLCJleGl0Q2FwUmF0ZSIsImZpbmFsQ2FzaEZsb3dCZWZvcmVEZWJ0IiwiZmluYWxDYXNoRmxvd0FmdGVyRGVidCIsIm1hcCIsInJvdyIsImNhbGN1bGF0ZUlSUiIsInRvRml4ZWQiLCJjYXNoRmxvd3MiLCJndWVzcyIsIm1heEl0ZXJhdGlvbnMiLCJ0b2xlcmFuY2UiLCJsZW5ndGgiLCJoYXNQb3NpdGl2ZUZsb3dzIiwic2xpY2UiLCJzb21lIiwiZmxvdyIsImkiLCJucHYiLCJjYWxjdWxhdGVOUFYiLCJkZXJpdmF0aXZlIiwiY2FsY3VsYXRlTlBWRGVyaXZhdGl2ZSIsImFicyIsIm5ld0d1ZXNzIiwicmF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/recalculateIRR/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2FrecalculateIRR%2Froute&page=%2Fapi%2FrecalculateIRR%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2FrecalculateIRR%2Froute.ts&appDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwesto%5COneDrive%5CDocuments%5CFirst%20Pass%20OM%20Reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();